<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>How It Works - NES Outage Status Checker</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>âš¡</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=DM+Serif+Display&family=Outfit:wght@300;400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <style>
        :root {
            /* Typography */
            --font-display: 'DM Serif Display', Georgia, serif;
            --font-body: 'Outfit', system-ui, sans-serif;
            --font-mono: 'JetBrains Mono', 'SF Mono', monospace;

            /* Base tones - warm charcoal */
            --bg-primary: #1C1917;
            --bg-secondary: #292524;
            --bg-tertiary: #3D3936;
            --bg-hover: #44403C;
            --border-color: rgba(168, 162, 158, 0.15);

            /* Text hierarchy */
            --text-primary: #FAFAF9;
            --text-secondary: #A8A29E;
            --text-muted: #78716C;

            /* Status - waiting (amber) */
            --status-waiting: #F59E0B;
            --status-waiting-bg: rgba(245, 158, 11, 0.12);

            /* Status - active (emerald) */
            --status-active: #10B981;
            --status-active-bg: rgba(16, 185, 129, 0.12);

            /* Accent - warm orange */
            --accent: #F97316;
            --accent-muted: rgba(249, 115, 22, 0.15);
            --accent-hover: #EA580C;

            /* Legacy */
            --success: #10B981;
            --danger: #EF4444;
        }

        * {
            box-sizing: border-box;
        }

        html {
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }

        body {
            font-family: var(--font-body);
            background: var(--bg-primary);
            color: var(--text-primary);
            min-height: 100vh;
            margin: 0;
            padding: 24px;
            line-height: 1.7;
            position: relative;
        }

        /* Atmospheric noise texture */
        body::before {
            content: '';
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            opacity: 0.025;
            z-index: 1000;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
        }

        /* Ambient glow */
        body::after {
            content: '';
            position: fixed;
            top: -40%;
            right: -20%;
            width: 70%;
            height: 70%;
            background: radial-gradient(ellipse at center, rgba(249, 115, 22, 0.04) 0%, transparent 60%);
            pointer-events: none;
            z-index: -1;
        }

        .container {
            max-width: 800px;
            margin: 0 auto;
            position: relative;
            z-index: 1;
        }

        header {
            display: flex;
            justify-content: space-between;
            align-items: flex-end;
            margin-bottom: 32px;
            padding-bottom: 24px;
            border-bottom: 1px solid var(--border-color);
            flex-wrap: wrap;
            gap: 16px;
        }

        .header-brand {
            flex: 1;
        }

        h1 {
            font-family: var(--font-display);
            font-size: 1.75rem;
            font-weight: 400;
            color: var(--text-primary);
            margin: 0;
            letter-spacing: -0.02em;
        }

        .header-subtitle {
            font-size: 0.875rem;
            color: var(--text-muted);
            margin-top: 4px;
        }

        .header-links {
            display: flex;
            gap: 8px;
            align-items: center;
        }

        .header-link {
            color: var(--text-secondary);
            text-decoration: none;
            font-size: 0.8125rem;
            font-weight: 500;
            padding: 8px 12px;
            border-radius: 6px;
            border: 1px solid var(--border-color);
            transition: all 0.2s;
        }

        .header-link:hover {
            background: var(--bg-tertiary);
            color: var(--text-primary);
            border-color: var(--text-muted);
            text-decoration: none;
        }

        .content {
            background: var(--bg-secondary);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            padding: 40px;
            box-shadow: 0 4px 12px rgba(28, 25, 23, 0.4);
        }

        h2 {
            font-family: var(--font-display);
            color: var(--text-primary);
            font-size: 1.5rem;
            font-weight: 400;
            margin-top: 0;
            margin-bottom: 20px;
            padding-bottom: 16px;
            border-bottom: 1px solid var(--border-color);
        }

        h3 {
            font-family: var(--font-display);
            color: var(--accent);
            font-size: 1.25rem;
            font-weight: 400;
            margin-top: 36px;
            margin-bottom: 16px;
        }

        p {
            color: var(--text-secondary);
            margin-bottom: 20px;
        }

        .highlight {
            color: var(--text-primary);
            font-weight: 600;
        }

        .callout {
            background: var(--accent-muted);
            border-left: 4px solid var(--accent);
            padding: 20px 24px;
            border-radius: 0 12px 12px 0;
            margin: 28px 0;
        }

        .callout p {
            margin: 0;
            color: var(--text-primary);
        }

        .json-block {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            border-radius: 12px;
            padding: 24px;
            overflow-x: auto;
            font-family: var(--font-mono);
            font-size: 0.85rem;
            line-height: 1.6;
            margin: 24px 0;
        }

        .json-key {
            color: #F59E0B;
        }

        .json-string {
            color: #10B981;
        }

        .json-number {
            color: #F97316;
        }

        .json-highlight {
            background: rgba(245, 158, 11, 0.2);
            padding: 2px 6px;
            border-radius: 4px;
        }

        .status-example {
            display: flex;
            gap: 20px;
            margin: 24px 0;
            flex-wrap: wrap;
        }

        .status-box {
            flex: 1;
            min-width: 200px;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
        }

        .status-box.unassigned {
            background: var(--status-waiting-bg);
            border: 1px solid rgba(245, 158, 11, 0.3);
        }

        .status-box.assigned {
            background: var(--status-active-bg);
            border: 1px solid rgba(16, 185, 129, 0.3);
        }

        .status-box .label {
            font-size: 0.75rem;
            color: var(--text-muted);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 0.05em;
        }

        .status-box .value {
            font-size: 1.1rem;
            font-weight: 600;
            font-family: var(--font-mono);
        }

        .status-box.unassigned .value {
            color: var(--status-waiting);
        }

        .status-box.assigned .value {
            color: var(--status-active);
        }

        .api-url {
            background: var(--bg-primary);
            border: 1px solid var(--border-color);
            padding: 16px 20px;
            border-radius: 8px;
            font-family: var(--font-mono);
            font-size: 0.85rem;
            word-break: break-all;
            color: var(--accent);
            margin: 16px 0;
        }

        footer {
            margin-top: 48px;
            padding-top: 24px;
            border-top: 1px solid var(--border-color);
            text-align: center;
            font-size: 0.8125rem;
            color: var(--text-muted);
        }

        footer a {
            color: var(--accent);
            text-decoration: none;
            transition: color 0.2s;
        }

        footer a:hover {
            color: var(--accent-hover);
        }

        .built-with {
            margin-top: 8px;
            color: var(--text-muted);
            opacity: 0.7;
        }

        .new-domain-banner {
            background: var(--accent);
            color: white;
            text-align: center;
            padding: 12px 20px;
            font-size: 0.9rem;
            position: relative;
            box-shadow: 0 4px 12px rgba(28, 25, 23, 0.4);
        }

        .new-domain-banner a {
            color: white;
            font-weight: 700;
            text-decoration: underline;
        }

        .new-domain-banner .dismiss {
            position: absolute;
            right: 12px;
            top: 50%;
            transform: translateY(-50%);
            background: rgba(255,255,255,0.2);
            border: none;
            color: white;
            width: 24px;
            height: 24px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 1rem;
            line-height: 1;
            padding: 0;
        }

        .new-domain-banner .dismiss:hover {
            background: rgba(255,255,255,0.3);
        }

        .new-domain-banner .subtext {
            font-size: 0.8rem;
            opacity: 0.9;
            margin-top: 4px;
        }
    </style>
</head>
<body>
    <div class="new-domain-banner" id="domainBanner">
        New home! This site is now available at <a href="https://nes-outage-checker.com">nes-outage-checker.com</a>
        <div class="subtext">Both URLs will always stay in sync - use whichever you prefer!</div>
        <button class="dismiss" onclick="dismissDomainBanner()" title="Dismiss">&times;</button>
    </div>

    <div class="container">
        <header>
            <div class="header-brand">
                <h1>How It Works</h1>
                <p class="header-subtitle">Understanding the data behind the tracker</p>
            </div>
            <div class="header-links">
                <a href="index.html" class="header-link">Monitor</a>
                <a href="all.html" class="header-link">All Outages</a>
            </div>
        </header>

        <div class="content">
            <h2>Where Does This Data Come From?</h2>

            <p>
                <span class="highlight">All data displayed on this site comes directly from Nashville Electric Service (NES).</span>
                We don't add, modify, or interpret any of the information - we simply fetch it from NES's public API and display it in a more accessible format.
            </p>

            <div class="callout">
                <p>This tool is essentially a "viewer" for NES's own outage data. The Assigned/Unassigned status, affected customer counts, cause descriptions, and all other fields are provided by NES - not by us.</p>
            </div>

            <h3>The NES API</h3>

            <p>NES provides a public API endpoint that returns all active outage events as JSON data:</p>

            <div class="api-url">
                https://utilisocial.io/datacapable/v2/p/NES/map/events
            </div>

            <p>This is the same data source that powers NES's official outage map. We just fetch it and present it differently.</p>

            <h3>What Each Event Looks Like</h3>

            <p>Here's an example of what NES returns for a single outage event:</p>

            <div class="json-block">
<span class="json-key">{</span>
  <span class="json-key">"id"</span>: <span class="json-number">123456</span>,
  <span class="json-key">"title"</span>: <span class="json-string">"Outage"</span>,
  <span class="json-key"><span class="json-highlight">"status"</span></span>: <span class="json-string"><span class="json-highlight">"Unassigned"</span></span>,
  <span class="json-key">"numPeople"</span>: <span class="json-number">847</span>,
  <span class="json-key">"cause"</span>: <span class="json-string">"Under Investigation"</span>,
  <span class="json-key">"startTime"</span>: <span class="json-number">1706540400000</span>,
  <span class="json-key">"lastUpdatedTime"</span>: <span class="json-number">1706541300000</span>,
  <span class="json-key">"latitude"</span>: <span class="json-number">36.1627</span>,
  <span class="json-key">"longitude"</span>: <span class="json-number">-86.7816</span>
<span class="json-key">}</span>
            </div>

            <h3>The Status Field</h3>

            <p>The <code>status</code> field is provided directly by NES and typically has one of these values:</p>

            <div class="status-example">
                <div class="status-box unassigned">
                    <div class="label">NES returns:</div>
                    <div class="value">"Unassigned"</div>
                    <p style="margin-top: 12px; font-size: 0.85rem; color: var(--text-muted);">
                        No crew has been dispatched yet
                    </p>
                </div>
                <div class="status-box assigned">
                    <div class="label">NES returns:</div>
                    <div class="value">"Assigned"</div>
                    <p style="margin-top: 12px; font-size: 0.85rem; color: var(--text-muted);">
                        A crew is on the way or working on it
                    </p>
                </div>
            </div>

            <p>
                We display these exactly as NES provides them. When you see "UNASSIGNED" in red or "ASSIGNED" in green, that's coming straight from NES's system - we're just making it more visible.
            </p>

            <h3>Why Build This?</h3>

            <p>
                NES already has an outage map, but this tool provides some additional features:
            </p>

            <ul style="color: var(--text-secondary);">
                <li><strong style="color: var(--text-primary);">Monitor specific events</strong> - Track your outage by Event ID</li>
                <li><strong style="color: var(--text-primary);">Browser notifications</strong> - Get alerted when status changes</li>
                <li><strong style="color: var(--text-primary);">See all outages at once</strong> - Filter and sort by status, duration, or impact</li>
                <li><strong style="color: var(--text-primary);">Shareable links</strong> - Send someone a link to monitor the same events</li>
                <li><strong style="color: var(--text-primary);">Map visualization</strong> - See geographic distribution of assigned vs unassigned outages</li>
            </ul>

            <h3>Open Source</h3>

            <p>
                This project is completely open source. You can view all the code, see exactly how data is fetched and displayed, and even run your own copy:
            </p>

            <p style="margin-top: 16px;">
                <a href="https://github.com/NeckBeardPrince/nes-outage-status-checker" target="_blank" style="color: var(--accent);">
                    github.com/NeckBeardPrince/nes-outage-status-checker
                </a>
            </p>
        </div>

        <footer>
            <a href="https://github.com/NeckBeardPrince/nes-outage-status-checker" target="_blank">GitHub</a>
            &middot;
            <a href="https://github.com/NeckBeardPrince/nes-outage-status-checker/blob/main/CHANGELOG.md" target="_blank">Changelog</a>
            <div class="built-with">
                Built by <a href="https://iamadam.dev/" target="_blank" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; text-decoration: none; font-weight: 700;">Adam</a>
                <span style="margin: 0 6px; color: #666;">+</span>
                <span style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; font-weight: 700;">Claude AI</span>
            </div>
        </footer>
    </div>

    <script>
        // Domain banner - only show on old GitHub Pages site
        function dismissDomainBanner() {
            document.getElementById('domainBanner').style.display = 'none';
            localStorage.setItem('nes-domain-banner-dismissed', 'true');
        }

        (function() {
            const isNewDomain = window.location.hostname === 'nes-outage-checker.com' ||
                               window.location.hostname === 'www.nes-outage-checker.com';
            const isDismissed = localStorage.getItem('nes-domain-banner-dismissed') === 'true';

            if (isNewDomain || isDismissed) {
                document.getElementById('domainBanner').style.display = 'none';
            }
        })();
    </script>
</body>
</html>
